{% extends 'bakeshop/base.html' %}
{% load bakeshop_tags %}
{% load static %}

{% block title %}{{ job.title }} - Careers at {{ site_settings.site_name }}{% endblock %}

{% block extra_css %}

{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="job-hero" style="background-image: url('{% static 'images/career-bg.jpg' %}');">
    <div class="job-hero-overlay"></div>
    <div class="container">
        <div class="job-hero-content">
            <h1>{{ job.title }}</h1>
            <p>{{ job.location }} | {{ job.get_employment_type_display }}</p>
        </div>
    </div>
</section>

<!-- Job Detail Section -->
<section class="job-detail-section">
    <div class="container">
        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-8">
                <div class="job-detail-container">
                    <!-- Job Header -->
                    <div class="job-header">
                        <div class="job-title">
                            <h1>{{ job.title }}</h1>
                            <p>{{ job.category.name }}</p>
                        </div>
                        <div class="job-badges">
                            {{ job|job_badge|safe }}
                        </div>
                    </div>
                    
                    <!-- Job Meta -->
                    <div class="job-meta">
                        <ul class="job-meta-list">
                            <li><i class="fas fa-map-marker-alt"></i> {{ job.location }}</li>
                            <li><i class="fas fa-briefcase"></i> {{ job.get_employment_type_display }}</li>
                            <li><i class="fas fa-calendar-alt"></i> Posted on {{ job.date_posted|date:"F d, Y" }}</li>
                            {% if job.salary_range %}
                            <li><i class="fas fa-money-bill-wave"></i> {{ job.salary_range }}</li>
                            {% endif %}
                        </ul>
                    </div>
                    
                    <!-- Job Description -->
                    <div class="job-section">
                        <h2>Job Description</h2>
                        <div class="job-description">
                            {{ job.description|safe }}
                        </div>
                    </div>
                    
                    <!-- Responsibilities -->
                    <div class="job-section">
                        <h2>Responsibilities</h2>
                        <div class="job-responsibilities">
                            {{ job.responsibilities|safe }}
                        </div>
                    </div>
                    
                    <!-- Requirements -->
                    <div class="job-section">
                        <h2>Requirements</h2>
                        <div class="job-requirements">
                            {{ job.requirements|safe }}
                        </div>
                    </div>
                    
                    <!-- Benefits -->
                    {% if job.benefits %}
                    <div class="job-section">
                        <h2>Benefits</h2>
                        <div class="job-benefits">
                            {{ job.benefits|safe }}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Apply Now Section -->
                    <div class="apply-section">
                        <h2>Interested in This Position?</h2>
                        <p>If you think you're the right fit for this role, we'd love to hear from you. Apply now and join our team!</p>
                        <a href="{% url 'bakeshop:job_apply' job.id %}" class="btn btn-primary apply-btn">Apply Now</a>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="col-lg-4">
                <!-- Share Job -->
                <div class="sidebar-card">
                    <h3>Share This Job</h3>
                    <p>Know someone who might be interested in this position? Share it with them!</p>
                    <div class="sidebar-share">
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share-link facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text=Check%20out%20this%20job%20opportunity:" target="_blank" class="share-link twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}" target="_blank" class="share-link linkedin">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="mailto:?subject=Job Opportunity: {{ job.title }}&body=Check out this job opportunity: {{ request.build_absolute_uri }}" class="share-link">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Apply Now -->
                <div class="sidebar-card">
                    <h3>Apply for This Job</h3>
                    <p>Ready to take the next step in your career? Apply now!</p>
                    <a href="{% url 'bakeshop:job_apply' job.id %}" class="btn btn-primary w-100">Apply Now</a>
                </div>
                
                <!-- Company Overview -->
                <div class="sidebar-card">
                    <h3>About Us</h3>
                    <p>{{ site_settings.site_name }} is a leading bakery known for its high-quality products and exceptional customer service. We're passionate about crafting delicious moments and baking memorable experiences.</p>
                    <a href="{% url 'bakeshop:about' %}" class="btn btn-outline-primary w-100">Learn More</a>
                </div>
                
                <!-- Related Jobs -->
                <div class="sidebar-card related-jobs">
                    <h3>Similar Positions</h3>
                    {% for related_job in related_jobs %}
                    <div class="related-job-item">
                        <h4>{{ related_job.title }}</h4>
                        <p><i class="fas fa-map-marker-alt"></i> {{ related_job.location }}</p>
                        <p><i class="fas fa-briefcase"></i> {{ related_job.get_employment_type_display }}</p>
                        <a href="{% url 'bakeshop:job_detail' related_job.id %}" class="view-btn">View Job <i class="fas fa-chevron-right"></i></a>
                    </div>
                    {% empty %}
                    <p>No similar positions available at the moment.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy job URL functionality
        const copyBtn = document.querySelector('.copy-link');
        if (copyBtn) {
            copyBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                const url = window.location.href;
                navigator.clipboard.writeText(url).then(() => {
                    alert('Job URL copied to clipboard!');
                });
            });
        }
    });
</script>
{% endblock %}