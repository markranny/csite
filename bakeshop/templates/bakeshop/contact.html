{% extends 'bakeshop/base.html' %}
{% load bakeshop_tags %}
{% load static %}

{% block title %}Contact Us - {{ site_settings.site_name }}{% endblock %}

{% block extra_css %}
<style>
    .contact-hero {
        padding: 150px 0;
        background-size: cover;
        background-position: center;
        position: relative;
        color: #fff;
        text-align: center;
    }
    
    .contact-hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
    }
    
    .contact-hero-content {
        position: relative;
        z-index: 1;
    }
    
    .contact-hero h1 {
        font-family: 'Playfair Display', serif;
        font-size: 48px;
        margin-bottom: 20px;
    }
    
    .contact-hero p {
        font-size: 20px;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .contact-section {
        padding: 80px 0;
    }
    
    .contact-info-card {
        background-color: #f9f5f0;
        border-radius: 10px;
        padding: 30px;
        margin-bottom: 30px;
        transition: transform 0.3s ease;
    }
    
    .contact-info-card:hover {
        transform: translateY(-5px);
    }
    
    .contact-icon {
        width: 60px;
        height: 60px;
        background-color: #fff;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
    }
    
    .contact-icon i {
        font-size: 24px;
        color: #8c5e17;
    }
    
    .contact-info-card h3 {
        font-family: 'Playfair Display', serif;
        font-size: 22px;
        margin-bottom: 15px;
    }
    
    .contact-info-card p {
        color: #666;
        margin-bottom: 5px;
    }
    
    .contact-form-card {
        background-color: #fff;
        border-radius: 10px;
        padding: 40px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .contact-form-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .contact-form-header h2 {
        font-family: 'Playfair Display', serif;
        font-size: 32px;
        margin-bottom: 15px;
    }
    
    .contact-form-header p {
        color: #666;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-label {
        font-weight: 600;
        margin-bottom: 8px;
    }
    
    .form-control {
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    
    .form-control:focus {
        border-color: #8c5e17;
        box-shadow: 0 0 0 0.2rem rgba(140, 94, 23, 0.25);
    }
    
    .submit-btn {
        background-color: #8c5e17;
        color: #fff;
        border: none;
        padding: 15px 25px;
        border-radius: 5px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .submit-btn:hover {
        background-color: #6d4a12;
    }
    
    .map-section {
        height: 400px;
        margin-top: 80px;
    }
    
    .map-container {
        height: 100%;
        width: 100%;
        border-radius: 10px;
        overflow: hidden;
    }
    
    .social-media-icons {
        display: flex;
        justify-content: center;
        gap: 20px;
    }
    
    .social-icon {
        width: 60px;
        height: 60px;
        background-color: #f9f5f0;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #8c5e17;
        font-size: 24px;
        transition: all 0.3s ease;
    }
    
    .social-icon:hover {
        background-color: #8c5e17;
        color: #fff;
        transform: translateY(-5px);
    }
    
    @media (max-width: 768px) {
        .contact-form-card {
            padding: 30px 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="contact-hero" style="background-image: url('{% static 'images/contact-bg.jpg' %}');">
    <div class="contact-hero-overlay"></div>
    <div class="container">
        <div class="contact-hero-content">
            <h1>Contact Us</h1>
            <p>We'd love to hear from you! Get in touch with any questions, feedback, or inquiries.</p>
        </div>
    </div>
</section>

<!-- Contact Information -->
<section class="contact-section">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3>Visit Us</h3>
                    <p>{{ site_settings.address }}</p>
                    <p>Monday - Friday: 8AM - 8PM</p>
                    <p>Saturday - Sunday: 9AM - 6PM</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h3>Call Us</h3>
                    <p>Phone: {{ site_settings.phone_number|phone_format }}</p>
                    <p>Toll-Free: 1-800-BAKESHOP</p>
                    <p>Customer Service Hours: 9AM - 5PM</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h3>Email Us</h3>
                    <p>General Inquiries: {{ site_settings.email }}</p>
                    <p>Orders: orders@eljinbakeshop.com</p>
                    <p>Careers: careers@eljinbakeshop.com</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Form -->
<section class="contact-section" style="background-color: #f9f5f0;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="contact-form-card">
                    <div class="contact-form-header">
                        <h2>Send Us a Message</h2>
                        <p>Fill out the form below and we'll get back to you as soon as possible.</p>
                    </div>
                    
                    {% if messages %}
                    <div class="alert alert-success mb-4">
                        {% for message in messages %}
                            {{ message }}
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <form method="post" action="{% url 'bakeshop:contact' %}">
                        {% csrf_token %}
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">Your Name *</label>
                                    {{ form.name }}
                                    {% if form.name.errors %}
                                    <div class="text-danger mt-1">
                                        {{ form.name.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">Your Email *</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                    <div class="text-danger mt-1">
                                        {{ form.email.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.phone.id_for_label }}" class="form-label">Phone Number</label>
                                    {{ form.phone }}
                                    {% if form.phone.errors %}
                                    <div class="text-danger mt-1">
                                        {{ form.phone.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.subject.id_for_label }}" class="form-label">Subject *</label>
                                    {{ form.subject }}
                                    {% if form.subject.errors %}
                                    <div class="text-danger mt-1">
                                        {{ form.subject.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.message.id_for_label }}" class="form-label">Your Message *</label>
                            {{ form.message }}
                            {% if form.message.errors %}
                            <div class="text-danger mt-1">
                                {{ form.message.errors }}
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="text-center mt-4">
                            <button type="submit" class="submit-btn">Send Message</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="map-section">
    <div class="container">
        <div class="map-container">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3851.408138933407!2d120.59270511491064!3d15.479842789249034!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3396c78ede23bed3%3A0xf294c35964fd3c48!2sTarlac%20City%2C%20Tarlac%2C%20Philippines!5e0!3m2!1sen!2sus!4v1646461459852!5m2!1sen!2sus"
                width="100%" 
                height="100%" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy">
            </iframe>
        </div>
    </div>
</section>

<!-- Social Media Section -->
<section class="contact-section">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h2 class="mb-4">Connect With Us</h2>
                <p class="mb-5">Follow us on social media to stay updated with our latest offerings, events, and promotions.</p>
                
                <div class="social-media-icons">
                    {% if site_settings.facebook_url %}
                    <a href="{{ site_settings.facebook_url }}" target="_blank" class="social-icon">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    {% endif %}
                    
                    {% if site_settings.instagram_url %}
                    <a href="{{ site_settings.instagram_url }}" target="_blank" class="social-icon">
                        <i class="fab fa-instagram"></i>
                    </a>
                    {% endif %}
                    
                    {% if site_settings.twitter_url %}
                    <a href="{{ site_settings.twitter_url }}" target="_blank" class="social-icon">
                        <i class="fab fa-twitter"></i>
                    </a>
                    {% endif %}
                    
                    <a href="#" class="social-icon">
                        <i class="fab fa-youtube"></i>
                    </a>
                    
                    <a href="#" class="social-icon">
                        <i class="fab fa-pinterest-p"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="contact-section" style="background-color: #f9f5f0;">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h2 class="mb-4">Frequently Asked Questions</h2>
                <p class="mb-5">Find answers to common questions about our products and services.</p>
            </div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Do you offer delivery services?
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Yes, we offer delivery services within Tarlac City and nearby areas. There's a minimum order requirement of â‚±500 for free delivery. For orders below the minimum amount, a delivery fee will be charged based on your location.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                How far in advance should I place a custom cake order?
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                For custom cake orders, we recommend placing your order at least 3-5 days in advance. For more elaborate designs or wedding cakes, please place your order 2-3 weeks ahead to ensure we can accommodate your request.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                Do you accommodate dietary restrictions?
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Yes, we offer a range of products for different dietary needs, including gluten-free, sugar-free, and vegetarian options. Please inform us of any allergies or dietary restrictions when placing your order, and we'll do our best to accommodate them.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                Do you offer catering services for events?
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Yes, we provide catering services for various events such as weddings, corporate functions, birthdays, and other celebrations. We offer customized packages to suit your specific needs and budget. Please contact us at least two weeks in advance to discuss your requirements.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Form validation
        const contactForm = document.querySelector('form');
        
        contactForm.addEventListener('submit', function(e) {
            let isValid = true;
            const nameInput = document.getElementById('{{ form.name.id_for_label }}');
            const emailInput = document.getElementById('{{ form.email.id_for_label }}');
            const subjectInput = document.getElementById('{{ form.subject.id_for_label }}');
            const messageInput = document.getElementById('{{ form.message.id_for_label }}');
            
            // Reset previous error messages
            document.querySelectorAll('.text-danger').forEach(el => el.textContent = '');
            
            // Validate required fields
            if (!nameInput.value.trim()) {
                document.querySelector(`#${nameInput.id} + .text-danger`).textContent = 'Please enter your name';
                isValid = false;
            }
            
            if (!emailInput.value.trim()) {
                document.querySelector(`#${emailInput.id} + .text-danger`).textContent = 'Please enter your email';
                isValid = false;
            } else if (!isValidEmail(emailInput.value.trim())) {
                document.querySelector(`#${emailInput.id} + .text-danger`).textContent = 'Please enter a valid email address';
                isValid = false;
            }
            
            if (!subjectInput.value.trim()) {
                document.querySelector(`#${subjectInput.id} + .text-danger`).textContent = 'Please enter a subject';
                isValid = false;
            }
            
            if (!messageInput.value.trim()) {
                document.querySelector(`#${messageInput.id} + .text-danger`).textContent = 'Please enter your message';
                isValid = false;
            }
            
            if (!isValid) {
                e.preventDefault();
            }
        });
        
        // Email validation helper
        function isValidEmail(email) {
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }
    });
</script>
{% endblock %}