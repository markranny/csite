{% extends 'bakeshop/base.html' %}
{% load bakeshop_tags %}
{% load static %}

{% block title %}Franchise Opportunities - {{ site_settings.site_name }}{% endblock %}

{% block extra_css %}

{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="franchise-hero" style="background-image: url('{% static 'images/franchise-bg.jpg' %}');">
    <div class="franchise-hero-overlay"></div>
    <div class="container">
        <div class="franchise-hero-content">
            <h1>Franchise Opportunities</h1>
            <p>Join the {{ site_settings.site_name }} family and build a successful business with our proven bakery concept</p>
        </div>
    </div>
</section>

<!-- Introduction Section -->
{% if sections.intro %}
<section class="franchise-section">
    <div class="container">
        <div class="section-title">
            <h2>{{ sections.intro.title }}</h2>
        </div>
        
        <div class="intro-content">
            {{ sections.intro.content|safe }}
        </div>
    </div>
</section>
{% endif %}

<!-- Why Franchise With Us Section -->
{% if sections.why %}
<section class="franchise-section why-section">
    <div class="container">
        <div class="section-title">
            <h2>{{ sections.why.title }}</h2>
        </div>
        
        <div class="row">
            <div class="col-md-4">
                <div class="why-item">
                    <div class="why-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <h3>Established Brand</h3>
                    <p>Join a recognized and respected brand with over 25 years of success in the bakery industry.</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="why-item">
                    <div class="why-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Proven Business Model</h3>
                    <p>Benefit from our successful business model with consistent profit margins and sustainable growth.</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="why-item">
                    <div class="why-icon">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <h3>Comprehensive Support</h3>
                    <p>Receive ongoing training, marketing assistance, and operational support from our experienced team.</p>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            {{ sections.why.content|safe }}
        </div>
    </div>
</section>
{% endif %}

<!-- Franchise Models Section -->
<section class="franchise-section">
    <div class="container">
        <div class="section-title">
            <h2>Our Franchise Models</h2>
            <p>Choose the franchise option that best fits your investment goals and local market</p>
        </div>
        
        <div class="row">
            {% for model in models %}
            <div class="col-md-4">
                <div class="franchise-model {% if model.is_recommended %}recommended{% endif %}">
                    {% if model.is_recommended %}
                    <div class="recommended-badge">Recommended</div>
                    {% endif %}
                    
                    <h3>{{ model.name }}</h3>
                    <div class="franchise-price">₱{{ model.price|intcomma }}</div>
                    <p>{{ model.space_required }}</p>
                    
                    <div class="franchise-features">
                        <ul>
                            {% for feature in model.features.split('\n') %}
                            <li>{{ feature }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    
                    <a href="{% url 'bakeshop:franchise_request' %}" class="btn btn-primary w-100">Apply Now</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Investment Breakdown Section -->
{% if investment_items %}
<section class="franchise-section investment-section">
    <div class="container">
        <div class="section-title">
            <h2>Investment Breakdown</h2>
            <p>A detailed breakdown of the investment required for each franchise model</p>
        </div>
        
        <div class="table-responsive">
            <table class="investment-table">
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Express</th>
                        <th>Standard</th>
                        <th>Premium</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in investment_items %}
                    <tr>
                        <td>{{ item.component }}</td>
                        <td>₱{{ item.express_cost|intcomma }}</td>
                        <td>₱{{ item.standard_cost|intcomma }}</td>
                        <td>₱{{ item.premium_cost|intcomma }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endif %}

<!-- Requirements Section -->
{% if sections.requirements %}
<section class="franchise-section requirements-section">
    <div class="container">
        <div class="section-title">
            <h2>{{ sections.requirements.title }}</h2>
        </div>
        
        <div class="requirements-card">
            {{ sections.requirements.content|safe }}
        </div>
    </div>
</section>
{% endif %}

<!-- Application Process Section -->
{% if process_steps %}
<section class="franchise-section process-section">
    <div class="container">
        <div class="section-title">
            <h2>Application Process</h2>
            <p>Our simple step-by-step process to become a {{ site_settings.site_name }} franchisee</p>
        </div>
        
        <div class="process-steps">
            {% for step in process_steps %}
            <div class="process-step">
                <div class="step-number">{{ step.step_number }}</div>
                <div class="step-content">
                    <h3>{{ step.title }}</h3>
                    <p>{{ step.description }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Support & Training Section -->
{% if sections.support %}
<section class="franchise-section support-section">
    <div class="container">
        <div class="section-title">
            <h2>{{ sections.support.title }}</h2>
        </div>
        
        <div class="row">
            <div class="col-md-4">
                <div class="support-card">
                    <div class="support-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>Comprehensive Training</h3>
                    <p>Extensive initial training program for you and your staff, covering all aspects of bakery operations.</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="support-card">
                    <div class="support-icon">
                        <i class="fas fa-store"></i>
                    </div>
                    <h3>Store Setup</h3>
                    <p>Complete assistance with site selection, store design, equipment sourcing, and grand opening preparation.</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="support-card">
                    <div class="support-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <h3>Marketing Support</h3>
                    <p>Access to proven marketing strategies, promotional materials, and local marketing assistance.</p>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            {{ sections.support.content|safe }}
        </div>
    </div>
</section>
{% endif %}

<!-- Testimonials Section -->
{% if testimonials %}
<section class="franchise-section testimonial-section">
    <div class="container">
        <div class="section-title">
            <h2>Success Stories</h2>
            <p>Hear from our franchisees about their experience with {{ site_settings.site_name }}</p>
        </div>
        
        <div class="row">
            {% for testimonial in testimonials %}
            <div class="col-md-6">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-image">
                            <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}">
                        </div>
                        <div class="testimonial-info">
                            <h3>{{ testimonial.name }}</h3>
                            <p>{{ testimonial.location }} | {{ testimonial.years_as_franchisee }} years</p>
                        </div>
                    </div>
                    <div class="testimonial-content">
                        {{ testimonial.testimonial }}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- FAQ Section -->
{% if faqs %}
<section class="franchise-section faq-section">
    <div class="container">
        <div class="section-title">
            <h2>Frequently Asked Questions</h2>
            <p>Find answers to common questions about our franchise program</p>
        </div>
        
        <div class="accordion" id="franchiseFAQ">
            {% for faq in faqs %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                    <button class="accordion-button {% if not forloop.first %}collapsed{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="{{ forloop.first|yesno:'true,false' }}" aria-controls="collapse{{ forloop.counter }}">
                        {{ faq.question }}
                    </button>
                </h2>
                <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#franchiseFAQ">
                    <div class="accordion-body">
                        {{ faq.answer }}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Apply Now Section -->
<section class="apply-section">
    <div class="container">
        <div class="apply-content">
            <h2>Start Your Own Bakery Business Today</h2>
            <p>Take the first step towards owning a successful {{ site_settings.site_name }} franchise. Apply now and join our growing family of franchisees.</p>
            <a href="{% url 'bakeshop:franchise_request' %}" class="btn btn-primary btn-lg">Apply for Franchise</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize Bootstrap accordions
        var accordionButtons = document.querySelectorAll('.accordion-button');
        
        accordionButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                var isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                
                var target = document.querySelector(this.getAttribute('data-bs-target'));
                if (target) {
                    if (isExpanded) {
                        target.classList.remove('show');
                    } else {
                        target.classList.add('show');
                    }
                }
            });
        });
    });
</script>
{% endblock %}